{
 "ver": "0.1",
 "info": {
  "id": "33sfWs",
  "date": "0",
  "viewed": 0,
  "name": "Ex5, Task 1",
  "description": "tag",
  "likes": 0,
  "published": "Private",
  "usePreview": 0,
  "tags": [
   "tag"
  ],
  "hasliked": 0,
  "parentid": "",
  "parentname": ""
 },
 "renderpass": [
  {
   "inputs": [],
   "outputs": [
    {
     "id": "4dfGRr",
     "channel": 0
    }
   ],
   "code": "#define PI 3.14159265359\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from -1 to 1) provided by ChatGPT\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / (iResolution.y);\n\n    vec3 cameraOrigin = vec3(0.0, 0.0, 4.1);\n    \n    float radfov = (60.0 / 2.0) * PI / 180.0;\n    float focalLength = 1.0 / tan(radfov);\n    \n    vec3 direction = normalize(vec3(uv, -0.5*focalLength));\n    \n    vec3 planeColor = vec3(0.0, 0.0, 0.0);\n    \n    vec3 v0 = vec3(-0.93, -0.86, -2.06);\n    vec3 v1 = vec3(0.73, -0.95, -2.72);\n    vec3 v2 = vec3(0.08, 0.88, -2.13);\n\n    \n    // e1 = v1-v0 and e2 = v2-v0\n    vec3 N = normalize(cross(v1-v0,v2-v0));\n    \n    // N * P = D\n    // D = N * P\n    float D = dot(N, v0);\n    \n    // N * P = D and P = origin + t*direction\n    // N * (origin + t*direction) = D\n    // N * origin + N * t*direction = D\n    // t = (D - N * origin) / N * direction\n    \n    if (abs(dot(N, direction)) > 1e-06) {\n        float t = (D-dot(N, cameraOrigin)) / dot(N, direction);\n        \n        if (t > 0.0){\n            vec3 P = cameraOrigin + t*direction;\n            \n            // From v0->v1->v2->v0\n            vec3 posEdge1 = cross(v1-v0,P-v0);\n            vec3 posEdge2 = cross(v2-v1,P-v1);\n            vec3 posEdge3 = cross(v0-v2,P-v2);\n\n            if (dot(posEdge1,N) >= 0.0 && dot(posEdge2,N) >= 0.0 && dot(posEdge3,N) >= 0.0){\n                \n                // Set the A or v0 to origon and calculate vectors from\n                // A to B, A to C and A to P (point in triangle)\n                \n                vec3 AB = v1-v0;\n                vec3 AC = v2-v0;\n                vec3 AP = P-v0;\n                \n                // P = A + v*AB + w*AC\n                // AP = v*AB + w*AC\n                // Using dot product we can project this equation to AB and AC\n                // dot(AP,AB) = v*dot(AB,AB) + w*(AC,AB)\n                // dot(AP,AC) = v*dot(AB,AC) + w*(AC,AC)\n                // From these we can solve v and w\n\n                float d00 = dot(AB, AB);\n                float d01 = dot(AB, AC);\n                float d11 = dot(AC, AC);\n                float d20 = dot(AP, AB);\n                float d21 = dot(AP, AC);\n                \n                // From the equation above ChatGPT provides solutions for v and w\n                // And we also know that u = 1 - v - w\n\n                float denom = d00 * d11 - d01 * d01;\n\n                float v = (d11 * d20 - d01 * d21) / denom;\n                float w = (d00 * d21 - d01 * d20) / denom;\n                float u = 1.0 - v - w;\n\n                vec3 bc = vec3(u,v,w);\n                \n                planeColor = bc;\n            }\n        }\n    }\n    \n    // Output to screen\n    fragColor = vec4(planeColor,1.0);\n}",
   "name": "Image",
   "description": "",
   "type": "image"
  }
 ]
}