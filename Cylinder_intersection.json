{
 "ver": "0.1",
 "info": {
  "id": "WXXcWS",
  "date": "0",
  "viewed": 0,
  "name": "Ex4, Task 4",
  "description": "tag",
  "likes": 0,
  "published": "Private",
  "usePreview": 0,
  "tags": [
   "tag"
  ],
  "hasliked": 0,
  "parentid": "",
  "parentname": ""
 },
 "renderpass": [
  {
   "inputs": [],
   "outputs": [
    {
     "id": "4dfGRr",
     "channel": 0
    }
   ],
   "code": "#define PI 3.14159265359\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from -1 to 1) provided by ChatGPT\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / (iResolution.y);\n\n    vec3 cameraOrigin = vec3(0.0, 0.0, 4.08);\n    \n    float radfov = (60.0 / 2.0) * PI / 180.0;\n    float focalLength = 1.0 / tan(radfov);\n    \n    vec3 direction = normalize(vec3(uv, -0.5*focalLength));\n    vec3 normal = vec3(-0.8524684670021339, 0.52277864605111, 0.0);\n     \n    vec3 planeColor = vec3(0.0);\n    \n    vec3 center = vec3(0.0);\n    float r = 0.5;\n    float h = 1.3;\n    vec3 oc = cameraOrigin - center;\n    \n    // x²+z²-r²=0\n    // (o_x+td_x)²+(o_z+td_z)=r²\n    // at²+bt+c=0\n    \n    float a = direction.x*direction.x + direction.z*direction.z;\n    float b = 2.0 * (direction.x * cameraOrigin.x + direction.z * cameraOrigin.z);\n    float c = cameraOrigin.x*cameraOrigin.x+cameraOrigin.z*cameraOrigin.z-r*r;\n    \n    float discriminant = b*b - 4.0*a*c;\n    \n    if (discriminant >= 0.0) {\n        \n        //Lower value\n        float t = (-b - sqrt(discriminant)) / (2.0 * a);\n        \n        // Equation p=o+t*d\n        vec3 p = cameraOrigin + t * direction;\n        \n        // Had to cheat a little bit using ChatGPT\n        // We normalize the x and z coordinates but dont the y coordinates\n        // because the cylinder is around y-axis\n        vec3 n = normalize(vec3(p.x,0.0,p.z));\n        \n        // We are using coordinates [-1,1] so going back to [0,1]\n        if (abs(p.y) < h*0.5){\n            planeColor = n * 0.5 + 0.5;\n        }\n        \n    }\n    \n    // Output to screen\n    fragColor = vec4(planeColor,1.0);\n}",
   "name": "Image",
   "description": "",
   "type": "image"
  }
 ]
}